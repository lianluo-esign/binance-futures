# GPU渲染加速功能说明

## 概述

FlowSight现在支持GPU渲染加速，通过WGPU后端提供高性能的图形渲染。这个功能可以显著提升UI的响应速度和渲染质量，特别是在处理大量实时数据时。

## 功能特性

### 🚀 GPU加速渲染
- **WGPU后端**: 使用现代GPU API进行硬件加速渲染
- **高性能模式**: 优先使用独立显卡，最大化渲染性能
- **自适应质量**: 根据系统性能自动调整渲染质量

### 📊 实时性能监控
- **帧率监控**: 实时显示当前帧率（FPS）
- **性能分析**: 显示最高/最低/平均帧率
- **性能状态**: 自动评估渲染性能状态（优秀/良好/需要优化）

### ⚙️ 可配置渲染设置
- **GPU加速开关**: 可随时启用/禁用GPU加速
- **垂直同步**: 防止画面撕裂，可选择开启/关闭
- **抗锯齿**: 平滑边缘渲染，提升视觉质量
- **目标帧率**: 可设置目标帧率（30-144 FPS）

## 使用方法

### 启动GPU加速
应用程序默认启用GPU加速。在启动时会自动检测并使用最佳GPU配置。

### 访问GPU设置
1. 在应用程序顶部菜单栏点击 "🎮 GPU" 按钮
2. 在弹出的设置窗口中调整渲染参数
3. 实时查看性能监控数据

### 性能优化建议

#### 高性能模式（推荐用于交易）
- 关闭垂直同步
- 关闭抗锯齿
- 设置目标帧率为60 FPS
- 适用于需要最低延迟的交易场景

#### 高质量模式（推荐用于分析）
- 开启垂直同步
- 开启抗锯齿
- 设置目标帧率为60 FPS
- 适用于需要最佳视觉效果的场景

## 技术实现

### 渲染后端
- **WGPU**: 现代GPU API抽象层
- **Vulkan/DirectX 12/Metal**: 底层图形API支持
- **硬件加速**: 利用GPU并行处理能力

### 性能优化
- **批处理渲染**: 合并绘制调用，减少GPU开销
- **纹理缓存**: 智能缓存常用纹理
- **动态LOD**: 根据距离动态调整细节级别

### 兼容性
- **Windows**: 支持DirectX 12和Vulkan
- **macOS**: 支持Metal
- **Linux**: 支持Vulkan
- **自动回退**: 如果GPU不可用，自动回退到CPU渲染

## 故障排除

### 常见问题

#### 1. GPU加速未启用
**症状**: 帧率较低，性能监控显示"需要优化"
**解决方案**: 
- 检查显卡驱动是否最新
- 确认显卡支持DirectX 12/Vulkan/Metal
- 尝试重启应用程序

#### 2. 画面撕裂
**症状**: 画面出现水平撕裂线
**解决方案**: 
- 在GPU设置中开启垂直同步
- 检查显示器刷新率设置

#### 3. 性能下降
**症状**: 帧率突然降低
**解决方案**:
- 关闭抗锯齿功能
- 降低目标帧率
- 检查系统资源使用情况

### 性能基准

| 配置 | 平均帧率 | 适用场景 |
|------|----------|----------|
| 高性能模式 | 120+ FPS | 高频交易 |
| 平衡模式 | 60-90 FPS | 一般交易 |
| 高质量模式 | 30-60 FPS | 数据分析 |

## 开发信息

### 依赖库
- `egui = "0.27"` - GUI框架
- `eframe = "0.27"` - 应用程序框架
- `wgpu` - GPU渲染后端

### 配置选项
```rust
let gpu_config = GpuConfig::high_performance();
let options = eframe::NativeOptions {
    renderer: eframe::Renderer::Wgpu,
    wgpu_options: gpu_config.to_wgpu_options(),
    ..Default::default()
};
```

### 性能监控API
```rust
let monitor = GpuPerformanceMonitor::new(120);
monitor.record_frame();
let fps = monitor.get_fps();
```

## 更新日志

### v0.1.0
- 初始GPU渲染支持
- WGPU后端集成
- 基础性能监控
- 可配置渲染设置

### 计划功能
- 多显示器支持
- 自定义着色器
- 高级性能分析
- 渲染质量预设 
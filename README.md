# å¸å®‰æœŸè´§è®¢å•æµåˆ†æç³»ç»Ÿ

åŸºäºEventBusæ¶æ„çš„é«˜æ€§èƒ½å¸å®‰æœŸè´§è®¢å•æµåˆ†æå·¥å…·ï¼Œä½¿ç”¨Rustæ„å»ºã€‚

## ğŸš€ ç‰¹æ€§

- **äº‹ä»¶é©±åŠ¨æ¶æ„**: åŸºäºé«˜æ€§èƒ½RingBufferæ„å»ºçš„EventBusç³»ç»Ÿ
- **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„æ¨¡å—åˆ†ç¦»ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- **é«˜æ€§èƒ½**: ä¼˜åŒ–çš„æ•°æ®ç»“æ„å’Œç®—æ³•ï¼Œæ”¯æŒé«˜é¢‘æ•°æ®å¤„ç†
- **å®æ—¶åˆ†æ**: å®æ—¶è®¢å•æµåˆ†æã€ä»·æ ¼é€Ÿåº¦è®¡ç®—ã€æ³¢åŠ¨ç‡ç›‘æ§
- **å¯è§†åŒ–ç•Œé¢**: åŸºäºratatuiçš„ç»ˆç«¯UIç•Œé¢
- **è‡ªåŠ¨é‡è¿**: æ™ºèƒ½çš„WebSocketè¿æ¥ç®¡ç†å’Œé”™è¯¯æ¢å¤

## ğŸ—ï¸ æ¶æ„ä¼˜åŠ¿

1. **çº¯äº‹ä»¶é©±åŠ¨**: ä¿¡å·ç”Ÿæˆé€šè¿‡äº‹ä»¶å‘å¸ƒï¼Œä¸ç›´æ¥ä¿®æ”¹çŠ¶æ€
2. **è§£è€¦åˆ**: å„æ¨¡å—é—´é€šè¿‡EventBusè§£è€¦ï¼Œæé«˜å¯ç»´æŠ¤æ€§
3. **é«˜æ€§èƒ½å¤„ç†**: åŸºäºä¼˜åŒ–çš„RingBufferï¼Œæ”¯æŒé«˜é¢‘æ•°æ®å¤„ç†
4. **ç»Ÿä¸€æ—¶é—´ç³»ç»Ÿ**: ä½¿ç”¨ç»Ÿä¸€çš„æ—¶é—´æˆ³ä¿æŒä¸€è‡´æ€§
5. **å¯æ‰©å±•æ€§**: æ˜“äºæ·»åŠ æ–°çš„äº‹ä»¶ç±»å‹å’Œå¤„ç†å™¨

## ğŸ“¦ å®‰è£…

ç¡®ä¿ä½ å·²ç»å®‰è£…äº†Rust (1.70+):

```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

å…‹éš†é¡¹ç›®å¹¶æ„å»ºï¼š

```bash
git clone https://github.com/your-username/binance-futures.git
cd binance-futures
cargo build --release
```

## ğŸš€ ä½¿ç”¨

### åŸºæœ¬ä½¿ç”¨

è¿è¡Œé»˜è®¤äº¤æ˜“å¯¹ (BTCUSDT):
```bash
cargo run
```

æŒ‡å®šäº¤æ˜“å¯¹:
```bash
cargo run ETHUSDT
```

### æ“ä½œè¯´æ˜

- `â†‘/â†“`: æ»šåŠ¨è®¢å•ç°¿
- `Home/End`: è·³è½¬åˆ°é¦–å°¾
- `Space`: åˆ‡æ¢è‡ªåŠ¨æ»šåŠ¨
- `q`: é€€å‡ºç¨‹åº

## ğŸ§ª æµ‹è¯•

è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼š
```bash
cargo test
```

è¿è¡Œç‰¹å®šæµ‹è¯•ï¼š
```bash
cargo test test_event_bus_basic_functionality
```

## ğŸ“Š æ€§èƒ½

ç³»ç»Ÿç»è¿‡ä¼˜åŒ–ï¼Œæ”¯æŒï¼š
- é«˜é¢‘äº‹ä»¶å¤„ç† (>10,000 events/sec)
- ä½å»¶è¿Ÿæ•°æ®å¤„ç† (<1ms)
- å†…å­˜é«˜æ•ˆä½¿ç”¨
- CPUç¼“å­˜å‹å¥½çš„æ•°æ®ç»“æ„

## ğŸ”§ é…ç½®

å¯ä»¥é€šè¿‡Configç»“æ„ä½“è‡ªå®šä¹‰é…ç½®ï¼š

```rust
let config = Config::new("BTCUSDT".to_string())
    .with_buffer_size(10000)        // äº‹ä»¶ç¼“å†²åŒºå¤§å°
    .with_max_reconnects(5)         // æœ€å¤§é‡è¿æ¬¡æ•°
    .with_log_level("info".to_string()); // æ—¥å¿—çº§åˆ«
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ core/                   # æ ¸å¿ƒæ•°æ®ç»“æ„
â”œâ”€â”€ events/                # äº‹ä»¶ç³»ç»Ÿ
â”œâ”€â”€ handlers/              # äº‹ä»¶å¤„ç†å™¨
â”œâ”€â”€ orderbook/             # è®¢å•ç°¿ç®¡ç†
â”œâ”€â”€ websocket/             # WebSocketç®¡ç†
â”œâ”€â”€ app/                   # åº”ç”¨ç¨‹åº
â””â”€â”€ main.rs                # ä¸»ç¨‹åº
```

è¯¦ç»†æ¶æ„è¯´æ˜è¯·å‚è€ƒ [ARCHITECTURE.md](ARCHITECTURE.md)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## âš ï¸ å…è´£å£°æ˜

æœ¬å·¥å…·ä»…ç”¨äºæ•™è‚²å’Œç ”ç©¶ç›®çš„ã€‚ä½¿ç”¨æœ¬å·¥å…·è¿›è¡Œå®é™…äº¤æ˜“çš„é£é™©ç”±ç”¨æˆ·è‡ªè¡Œæ‰¿æ‹…ã€‚
6. å†…å­˜æ•ˆç‡ ï¼šé¿å…åœ¨ OrderBook ä¸­å­˜å‚¨ä¿¡å·å†å²
7. UIç•Œé¢çš„æ¸²æŸ“è§„åˆ™ä¸ºï¼šUIåŸºäºorderbookçš„æ•°æ®çŠ¶æ€å®æ—¶æ¸²æŸ“ï¼Œçº¯æ•°æ®çŠ¶æ€é©±åŠ¨æ¸²æŸ“ï¼Œè€Œä¸æ˜¯åŸºäºäº‹ä»¶æµè§¦å‘ã€‚
8. ringbufferæ”¯æŒå……åˆ†åˆ©ç”¨L1/L2ç¼“å­˜çš„åŠŸèƒ½

éœ€æ±‚1:
å®æ—¶è®¡ç®—æ’¤å•/å¢åŠ è®¢å•åŠŸèƒ½ï¼Œæ¯æ¬¡å½“å‰æ–°çš„depth updateçš„è·å–ï¼Œå’Œä¸Šä¸€æ¬¡updateçš„æ—¶å€™çš„è®¢å•è–„çš„æ•°æ®ä¸­çš„order_flowæ•°æ®çš„snapshot åšdiffï¼Œ å¦‚æœå½“å‰çš„order_flowçš„bidå˜å¤šäº† å°±æ˜¯å¢åŠ äº†æŒ‚å•ï¼Œå¦‚æœbidå˜å°‘äº† å°±æ˜¯æ’¤å•äº†ï¼Œ

å¹¶ä¸”å¯¹å½“å‰çš„tick tradeä»·æ ¼çš„åŒä»·ä½çš„orderåšå‡æ³•å»é™¤ä¸»åŠ¨è®¢å•çš„æ¶ˆè€—å¾—å‡ºçœŸæ­£çš„æ’¤å•å’Œå¢åŠ è®¢å•çš„æ•°é‡ã€‚å®æ—¶æ’¤å•ä¿å­˜åœ¨realtime_order_cancel

å¢åŠ è®¢å•ä¿å­˜åœ¨realtime_increase_order


éœ€æ±‚2:
é¦–å…ˆå¯¹handle_book_tickerçš„äº‹ä»¶è¿›è¡Œå¤„ç†ï¼Œå¢åŠ å¯¹bookTickerçš„å¿«ç…§ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡æ›´æ–°å®Œorderflowä¹‹åä¸´æ—¶ä¿å­˜ä¸€ä»½booktickerçš„æ•°æ®åˆ°booktickerSnapshotï¼Œåé¢è¦ç”¨åˆ°ã€‚

å½“tick trade è¢«è§¦å‘ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªä¸»åŠ¨çš„buy tradeä¸”æˆäº¤é‡å¤§äºbooktickerSnapshotçš„best aské‡ï¼Œåˆ™åˆ¤å®šä¸ºè®¢å•å†²å‡»ï¼Œäº§ç”Ÿä¸€ä¸ªè®¢å•å†²å‡»ä¹°å…¥çš„ä¿¡å·æŠ•æ”¾åˆ°äº‹ä»¶ç¼“å†²åŒºã€‚ 

å¦‚æœæ˜¯ä¸€ä¸ªä¸»åŠ¨çš„sell tradeä¸”æˆäº¤é‡å¤§äºbooktickerSnapshotçš„best bidé‡ï¼Œåˆ™åˆ¤å®šä¸ºè®¢å•å†²å‡»ï¼Œäº§ç”Ÿä¸€ä¸ªè®¢å•å†²å‡»å–å‡ºçš„ä¿¡å·ã€‚
